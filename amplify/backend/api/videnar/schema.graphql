type Question
  @model
  @searchable
  @key(
    name: "questionsByUsername"
    fields: ["username", "createdAt"]
    queryField: "questionsByUsername"
  )
  @auth(
    rules: [
      {allow: owner, ownerField: "owner", operations: [create, delete, update]}
    ]
  ) {
  id: ID!
  username: String!
  createdAt: AWSDateTime!
  content: String!
  upvotes: Int!
  view: Int!
  answers: [Answer] @connection(fields: ["id"])
  commentsOnQuestion: [CommentOnQuestion] @connection(fields: ["id"])
  tags: String!
  noOfBookmarks: Int!
}

type CommentOnQuestion
  @model
  @searchable
  @key(
    name: "commentsOnQuestionByquestionID"
    fields: ["questionID", "createdAt"]
    queryField: "commentsOnQuestionByquestionID"
  )
  @key(
    name: "commentsOnQuestionByUsername"
    fields: ["username", "createdAt"]
    queryField: "commentsOnQuestionByUsername"
  )
  @auth(
    rules: [
      {allow: owner, ownerField: "owner", operations: [create, delete, update]}
    ]
  ) {
  id: ID!
  username: String!
  questionID: ID!
  createdAt: AWSDateTime!
  content: String!
  question: Question @connection(fields: ["questionID"])
}

type Answer
  @model
  @searchable
  @key(
    name: "answersByquestionID"
    fields: ["questionID", "createdAt"]
    queryField: "answersByquestionID"
  )
  @key(
    name: "answersByUsername"
    fields: ["username", "createdAt"]
    queryField: "answersByUsername"
  )
  @auth(
    rules: [
      {allow: owner, ownerField: "owner", operations: [create, delete, update]}
    ]
  ) {
  id: ID!
  username: String!
  questionID: ID!
  createdAt: AWSDateTime!
  content: String!
  upvotes: Int!
  question: Question @connection(fields: ["questionID"])
  commentsOnAnswer: [CommentOnAnswer]
    @connection(keyName: "byAnswer", fields: ["id"])
}

type CommentOnAnswer
  @model
  @searchable
  @key(name: "byAnswer", fields: ["answerID", "content"])
  @key(
    name: "commentsOnAnswerByUsername"
    fields: ["username", "createdAt"]
    queryField: "commentsOnAnswerByUsername"
  )
  @auth(
    rules: [
      {allow: owner, ownerField: "owner", operations: [create, delete, update]}
    ]
  ) {
  id: ID!
  username: String!
  answerID: ID!
  questionID: ID!
  createdAt: AWSDateTime!
  content: String!
  answer: Answer @connection(fields: ["answerID"])
}
